{"version":3,"file":"static/js/302.a59f2a81.chunk.js","mappings":"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","sources":["commons/context.js","components/Project/getColumns.js","components/Project/FormInner.js","components/Project/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js"],"sourcesContent":["import { createContext, useContext } from 'react';\n\nconst context = createContext('/');\n\nexport const { Provider } = context;\n\nexport const useBaseUrl = baseUrlProp => {\n  const target = useContext(context);\n  return baseUrlProp || target?.baseUrl;\n};\n\nexport const useProps = () => {\n  return useContext(context);\n};\n\nexport default context;\n","const getColumns = () => [{\n    name: \"name\", title: \"项目名\", type: \"mainInfo\", hover: false, primary: false, fixed: \"left\"\n}, {\n    name: \"description\", title: \"描述\", type: \"description\"\n}];\n\nexport default getColumns;\n","import {createWithRemoteLoader} from '@kne/remote-loader';\n\nconst FormInner = createWithRemoteLoader({\n    modules: ['components-core:FormInfo']\n})(({remoteModules}) => {\n    const [FormInfo] = remoteModules;\n\n    const {Input, TextArea} = FormInfo.fields;\n\n    return <FormInfo column={1} list={[<Input name=\"name\" label=\"项目名\" rule=\"REQ LEN-0-50\"/>,\n        <TextArea name=\"description\" label=\"描述\"/>]}/>\n});\n\nexport default FormInner;\n","import {createWithRemoteLoader} from \"@kne/remote-loader\";\nimport {useNavigate, useLocation} from 'react-router-dom';\nimport {useRef} from 'react';\nimport {Space, Button, App} from \"antd\";\nimport getColumns from './getColumns';\nimport FormInner from './FormInner';\nimport {useProps} from '../../commons/context';\n\nconst Project = createWithRemoteLoader({\n    modules: ['components-core:Layout@TablePage', 'components-core:Global@usePreset', 'FormInfo@useFormModal']\n})(({remoteModules, ...props}) => {\n    const [TablePage, usePreset, useFormModal] = remoteModules;\n    const {apis: propsApis} = useProps();\n    const {ajax, apis} = usePreset();\n    const formModal = useFormModal();\n    const {getProjectList, doAddProject, doEditProject, doDeleteProject} = Object.assign({}, apis.postcat, propsApis);\n    const {message} = App.useApp();\n    const ref = useRef();\n    const navigate = useNavigate();\n    const location = useLocation();\n\n    return <TablePage {...Object.assign({}, getProjectList)} ref={ref} name=\"env\" page={{\n        ...props, title: \"项目\", titleExtra: <Space>\n            <Button type=\"primary\" onClick={() => {\n                const formModalApi = formModal({\n                    title: \"添加项目\", size: 'small', formProps: {\n                        onSubmit: async (formData) => {\n                            const {data: resData} = await ajax(Object.assign({}, doAddProject, {\n                                data: formData\n                            }));\n\n                            if (resData.code !== 0) {\n                                return;\n                            }\n                            message.success('添加成功');\n                            formModalApi.close();\n                            ref.current.reload();\n                        }\n                    }, children: <FormInner/>\n                });\n            }}>添加</Button>\n        </Space>\n    }} columns={[...getColumns(), {\n        name: \"options\", title: \"操作\", type: \"options\", fixed: \"right\", valueOf: (item) => [{\n            children: '查看', onClick: () => {\n                navigate(`${location.pathname}/${item.id}`)\n            }\n        }, {\n            onClick: () => {\n                const formModalApi = formModal({\n                    title: \"编辑项目\", size: 'small', formProps: {\n                        data: item, onSubmit: async (formData) => {\n                            const {data: resData} = await ajax(Object.assign({}, doEditProject, {\n                                data: Object.assign({}, formData, {id: item.id})\n                            }));\n                            if (resData.code !== 0) {\n                                return;\n                            }\n\n                            message.success('修改成功');\n                            formModalApi.close();\n                            ref.current.reload();\n                        }\n                    }, children: <FormInner/>\n                });\n            }, children: \"编辑\"\n        }, {\n            onClick: async () => {\n                const {data: resData} = await ajax(Object.assign({}, doDeleteProject, {\n                    data: {id: item.id}\n                }));\n                if (resData.code !== 0) {\n                    return;\n                }\n\n                message.success('删除成功');\n                ref.current.reload();\n            }, children: \"删除\"\n        }]\n    }]}/>;\n});\n\nexport default Project;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n"],"names":["context","createContext","Provider","useBaseUrl","baseUrlProp","target","useContext","baseUrl","useProps","getColumns","name","title","type","hover","primary","fixed","createWithRemoteLoader","modules","_ref","remoteModules","FormInfo","Input","TextArea","fields","_jsx","column","list","label","rule","props","TablePage","usePreset","useFormModal","apis","propsApis","ajax","formModal","getProjectList","doAddProject","doEditProject","doDeleteProject","Object","assign","postcat","message","App","useApp","ref","useRef","navigate","useNavigate","location","useLocation","page","titleExtra","Space","children","Button","onClick","formModalApi","size","formProps","onSubmit","async","data","resData","formData","code","success","close","current","reload","FormInner","columns","valueOf","item","concat","pathname","id","f","require","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","_owner","exports","Fragment","jsx","jsxs","module"],"sourceRoot":""}