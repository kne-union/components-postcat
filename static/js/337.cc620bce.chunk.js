(self.webpackChunk_kne_components_components_postcat=self.webpackChunk_kne_components_components_postcat||[]).push([[337,451,36],{72879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a=n(94679),o=n(19950),r=n(43302),i=n(79149),s=n(70579);const c=e=>{let{baseUrl:t,menuFixed:n,...c}=e;return(0,s.jsx)(o.Kq,{value:{baseUrl:t,...c},children:(0,s.jsxs)(a.Routes,{children:[(0,s.jsx)(a.Route,{index:!0,element:(0,s.jsx)(r.default,{menuFixed:n})}),(0,s.jsx)(a.Route,{path:":id",element:(0,s.jsx)(i.default,{menuFixed:n})}),(0,s.jsx)(a.Route,{path:":id/*",element:(0,s.jsx)(i.default,{menuFixed:n})}),(0,s.jsx)(a.Route,{path:"*",element:(0,s.jsx)(a.Navigate,{to:t})})]})})};c.defaultProps={baseUrl:"/"};const d=c},62667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(72879),o=n(73977),r=n(4743),i=n(13050),s=n(70579);const c=(0,r.createInstance)({name:"postcat-project"}),d=(0,r.createInstance)({name:"postcat-openapi-doc"}),p=(0,r.createInstance)({name:"postcat-env"}),l=(0,i.createWithRemoteLoader)({modules:["components-core:File@downloadBlobFile"]})((e=>{let{remoteModules:t,...n}=e;const[r]=t;return(0,s.jsx)(a.default,{...n,apis:{doAddProject:{loader:async e=>{let{data:t}=e;const n=(0,o.v4)(),a=Object.assign({},t,{id:n});return await c.setItem(n,a),a}},getProjectList:{loader:async()=>{const e=await c.keys(),t=await Promise.all(e.map((e=>c.getItem(e))));return{pageData:t,totalCount:t.length}}},doDeleteProject:{loader:async e=>{let{data:t}=e;const n=await c.getItem(t.id);if(!n)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");return n.openApiDocId&&await d.removeItem(n.openApiDocId),n.envIds&&await Promise.all(n.envIds.map((e=>p.removeItem(e)))),await c.removeItem(t.id),{}}},doEditProject:{loader:async e=>{let{data:t}=e;const n=await c.getItem(t.id);if(!n)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");const a=Object.assign({},n,t);return await c.setItem(a.id,a),a}},getProjectDetail:{loader:async e=>{let{params:t}=e;return await c.getItem(t.id)}},getOpenApiDoc:{loader:async e=>{let{params:t}=e;const n=await c.getItem(t.id);return n.openApiDocId?d.getItem(n.openApiDocId):null}},doAddOpenApiDoc:{loader:async e=>{let{data:{projectId:t,...n}}=e;const a=await c.getItem(t);if(!a)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");const r=(0,o.v4)(),i=Object.assign({},n,{id:r});return await d.setItem(r,i),await c.setItem(a.id,Object.assign({},a,{openApiDocId:r})),i}},doEditOpenApiDoc:{loader:async e=>{let{data:t}=e;const n=await d.getItem(t.id);if(!n)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");const a=Object.assign({},n,t);return await d.setItem(n.id,a),a}},getEnvList:{loader:async e=>{let{params:{projectId:t}}=e;const n=await p.keys(),a=(await Promise.all(n.map((e=>p.getItem(e))))).filter((e=>e.projectId===t));return{pageData:a,totalCount:a.length}}},doAddEnv:{loader:async e=>{let{data:t}=e;const n=await c.getItem(t.projectId);if(!n)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");const a=(0,o.v4)(),r=Object.assign({},t,{id:a});return await p.setItem(a,r),n.envIds||(n.envIds=[]),n.envIds.push(a),await c.setItem(n.id,Object.assign({},n)),r}},doEditEnv:{loader:async e=>{let{data:t}=e;const n=await p.getItem(t.id);if(!n)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");const a=Object.assign({},n,t);return await p.setItem(a.id,a),a}},doDeleteEnv:{loader:async e=>{let{data:t}=e;if(!await p.getItem(t.id))throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");return await p.removeItem(t.id),null}},excludeApis:{loader:async e=>{let{params:{projectId:t}}=e;const n=await c.getItem(t);if(!n.openApiDocId)throw new Error("\u6570\u636e\u5df2\u8fc7\u671f\u6e05\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5");const a=await d.getItem(n.openApiDocId);if(!(a&&a.content&&a.content.paths&&Object.keys(a.content.paths).length>0))throw new Error("\u6ca1\u6709\u53ef\u5bfc\u51fa\u7684API");return await r(new Blob([JSON.stringify(a.content)],{type:"text/plain"}),"openapi-".concat(a.id,".json")),null}},excludeProject:{loader:async e=>{let{params:{projectId:t}}=e;const n=await c.getItem(t);return n.openApiDocId&&(n.openApiDoc=await d.getItem(n.openApiDocId)),n.envIds&&n.envIds.length>0&&(n.envs=await Promise.all(n.envIds.map((e=>p.getItem(e))))),delete n.openApiDocId,delete n.envIds,await r(new Blob([JSON.stringify(n)],{type:"text/plain"}),"project-".concat(n.id,".json")),null}},includeProject:{loader:async e=>{let{data:{projectId:t,data:n}}=e;const a=await c.getItem(t);a.openApiDocId&&await d.removeItem(a.openApiDocId),a.envIds&&await Promise.all(a.envIds.map((e=>p.removeItem(e))));const r={id:t,name:a.name,description:n.description};if(n.openApiDoc&&n.openApiDoc.content&&n.openApiDoc.content.paths&&Object.keys(n.openApiDoc.content.paths).length>0){const e=(0,o.v4)();r.openApiDocId=e,await d.setItem(e,{id:e,content:n.openApiDoc.content})}return n.envs&&Array.isArray(n.envs)&&n.envs.length>0&&(a.envIds=await Promise.all(n.envs.map((async e=>{const n=(0,o.v4)();return await p.setItem(n,Object.assign({},e,{id:n,projectId:t})),n})))),await c.setItem(t,r),r}}}})}))},63868:(e,t,n)=>{var a=n(71775),o=n(93211);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&a(e,t,n)}},23253:(e,t,n)=>{var a=n(5538),o=n(63868),r=n(94258),i=n(83223),s=n(46686),c=n(30474),d=n(53737);e.exports=function e(t,n,p,l,m){t!==n&&r(n,(function(r,c){if(m||(m=new a),s(r))i(t,n,c,p,e,l,m);else{var u=l?l(d(t,c),r,c+"",t,n,m):void 0;void 0===u&&(u=r),o(t,c,u)}}),c)}},83223:(e,t,n)=>{var a=n(63868),o=n(44353),r=n(38710),i=n(91980),s=n(20310),c=n(22777),d=n(54052),p=n(76272),l=n(44543),m=n(11629),u=n(46686),I=n(12322),v=n(51268),w=n(53737),g=n(91609);e.exports=function(e,t,n,f,j,h,x){var y=w(e,n),A=w(t,n),D=x.get(A);if(D)a(e,n,D);else{var b=h?h(y,A,n+"",e,t,x):void 0,O=void 0===b;if(O){var E=d(A),P=!E&&l(A),_=!E&&!P&&v(A);b=A,E||P||_?d(y)?b=y:p(y)?b=i(y):P?(O=!1,b=o(A,!0)):_?(O=!1,b=r(A,!0)):b=[]:I(A)||c(A)?(b=y,c(y)?b=g(y):u(y)&&!m(y)||(b=s(A))):O=!1}O&&(x.set(A,b),j(b,A,f,h,x),x.delete(A)),a(e,n,b)}}},55647:(e,t,n)=>{var a=n(33279),o=n(55636),r=n(46350);e.exports=function(e,t){return r(o(e,t,a),e+"")}},84570:(e,t,n)=>{var a=n(55647),o=n(60929);e.exports=function(e){return a((function(t,n){var a=-1,r=n.length,i=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(r--,i):void 0,s&&o(n[0],n[1],s)&&(i=r<3?void 0:i,r=1),t=Object(t);++a<r;){var c=n[a];c&&e(t,c,a,i)}return t}))}},60929:(e,t,n)=>{var a=n(93211),o=n(6571),r=n(69194),i=n(46686);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?o(n)&&r(t,n.length):"string"==s&&t in n)&&a(n[t],e)}},53737:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},76272:(e,t,n)=>{var a=n(6571),o=n(22761);e.exports=function(e){return o(e)&&a(e)}},34677:(e,t,n)=>{var a=n(23253),o=n(84570)((function(e,t,n){a(e,t,n)}));e.exports=o},91609:(e,t,n)=>{var a=n(96614),o=n(30474);e.exports=function(e){return a(e,o(e))}}}]);
//# sourceMappingURL=337.cc620bce.chunk.js.map