{"version":3,"file":"static/js/411.b00b753b.chunk.js","mappings":"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","sources":["commons/context.js","components/Env/getColumns.js","components/Env/FormInner.js","components/Env/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js"],"sourcesContent":["import { createContext, useContext } from 'react';\n\nconst context = createContext('/');\n\nexport const { Provider } = context;\n\nexport const useBaseUrl = baseUrlProp => {\n  const target = useContext(context);\n  return baseUrlProp || target?.baseUrl;\n};\n\nexport const useProps = () => {\n  return useContext(context);\n};\n\nexport default context;\n","const getColumns = () => [{\n    name: \"name\", title: \"名称\", type: \"mainInfo\", hover: false, primary: false, fixed: \"left\"\n}, {\n    name: \"host\", title: \"HOST\", type: \"other\", ellipsis: true\n}, {\n    name: \"description\", title: \"描述\", type: \"description\", ellipsis: true\n}];\n\nexport default getColumns;\n","import {createWithRemoteLoader} from '@kne/remote-loader';\n\nconst FormInner = createWithRemoteLoader({\n    modules: ['components-core:FormInfo']\n})(({remoteModules}) => {\n    const [FormInfo] = remoteModules;\n    const {TableList} = FormInfo;\n    const {Input, TextArea} = FormInfo.fields;\n    return <>\n        <FormInfo column={1} list={[<Input name=\"name\" label=\"名称\" rule=\"REQ LEN-0-50\"/>,\n            <Input name=\"host\" label=\"HOST\" rule=\"LEN-0-500\"/>, <TextArea name=\"description\" label=\"描述\"/>]}/>\n        <TableList defaultLength={0}\n                   name=\"variable\"\n                   title=\"环境变量\"\n                   list={[<Input name=\"name\" label=\"名称\" rule=\"REQ LEN-0-50\"/>,\n                       <Input name=\"arg\" label=\"参数\" rule=\"REQ LEN-0-50\"/>,\n                       <Input name=\"description\" label=\"描述\" rule=\"LEN-0-50\"/>]}\n        />\n    </>\n});\n\nexport default FormInner;\n","import {createWithRemoteLoader} from \"@kne/remote-loader\";\nimport {useRef} from 'react';\nimport {Space, Button, App} from \"antd\";\nimport getColumns from './getColumns';\nimport FormInner from './FormInner';\nimport {useProps} from \"../../commons/context\";\n\nconst Env = createWithRemoteLoader({\n    modules: ['components-core:Layout@TablePage', 'components-core:Global@usePreset', 'FormInfo@useFormModal']\n})(({remoteModules, data, ...props}) => {\n    const [TablePage, usePreset, useFormModal] = remoteModules;\n    const {ajax, apis} = usePreset();\n    const {apis: propsApis} = useProps();\n    const formModal = useFormModal();\n    const {message} = App.useApp();\n    const ref = useRef();\n    const {getEnvList, doDeleteEnv, doAddEnv, doEditEnv} = Object.assign({}, apis.postcat, propsApis)\n    return <TablePage {...Object.assign({}, getEnvList)} params={{projectId: data.id}} ref={ref} name=\"env\" page={{\n        ...props, titleExtra: <Space>\n            <Button type=\"primary\" onClick={() => {\n                const formModalApi = formModal({\n                    title: \"添加环境\", formProps: {\n                        onSubmit: async (formData) => {\n                            const {data: resData} = await ajax(Object.assign({}, doAddEnv, {\n                                data: Object.assign({}, formData, {projectId: data.id})\n                            }));\n\n                            if (resData.code !== 0) {\n                                return;\n                            }\n                            message.success('添加成功');\n                            formModalApi.close();\n                            ref.current.reload();\n                        }\n                    }, children: <FormInner/>\n                });\n            }}>添加</Button>\n        </Space>\n    }} columns={[...getColumns(), {\n        name: \"options\", title: \"操作\", type: \"options\", fixed: \"right\", valueOf: (item) => [{\n            onClick: () => {\n                const formModalApi = formModal({\n                    title: \"编辑环境\", formProps: {\n                        data: item, onSubmit: async (formData) => {\n                            const {data: resData} = await ajax(Object.assign({}, doEditEnv, {\n                                data: Object.assign({}, formData, {id: item.id})\n                            }));\n                            if (resData.code !== 0) {\n                                return;\n                            }\n\n                            message.success('修改成功');\n                            formModalApi.close();\n                            ref.current.reload();\n                        }\n                    }, children: <FormInner/>\n                });\n            }, children: \"编辑\"\n        }, {\n            onClick: async () => {\n                const {data: resData} = await ajax(Object.assign({}, doDeleteEnv, {\n                    data: {id: item.id}\n                }));\n                if (resData.code !== 0) {\n                    return;\n                }\n\n                message.success('删除成功');\n                ref.current.reload();\n            }, children: \"删除\"\n        }]\n    }]}/>;\n});\n\nexport default Env;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n"],"names":["context","createContext","Provider","useBaseUrl","baseUrlProp","target","useContext","baseUrl","useProps","getColumns","name","title","type","hover","primary","fixed","ellipsis","createWithRemoteLoader","modules","_ref","remoteModules","FormInfo","TableList","Input","TextArea","fields","_jsxs","_Fragment","children","_jsx","column","list","label","rule","defaultLength","data","props","TablePage","usePreset","useFormModal","ajax","apis","propsApis","formModal","message","App","useApp","ref","useRef","getEnvList","doDeleteEnv","doAddEnv","doEditEnv","Object","assign","postcat","params","projectId","id","page","titleExtra","Space","Button","onClick","formModalApi","formProps","onSubmit","async","resData","formData","code","success","close","current","reload","FormInner","columns","valueOf","item","f","require","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","_owner","exports","Fragment","jsx","jsxs","module"],"sourceRoot":""}